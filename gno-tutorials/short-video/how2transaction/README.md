TODO
Refacto the run part, to make it more Complete
add example